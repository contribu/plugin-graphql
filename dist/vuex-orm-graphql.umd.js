!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.vuexOrmGraphql={})}(this,function(e){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)};function n(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(e,t){return e(t={exports:{}},t.exports),t.exports}var s=a(function(e,t){var n=200,r="__lodash_hash_undefined__",o=1,a=2,s=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",f="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",v="[object Null]",b="[object Object]",_="[object Proxy]",w="[object RegExp]",M="[object Set]",$="[object String]",j="[object Symbol]",k="[object Undefined]",O="[object ArrayBuffer]",A="[object DataView]",F=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[u]=I[c]=I[O]=I[f]=I[A]=I[h]=I[d]=I[p]=I[y]=I[m]=I[b]=I[w]=I[M]=I[$]=I["[object WeakMap]"]=!1;var S="object"==typeof i&&i&&i.Object===Object&&i,E="object"==typeof self&&self&&self.Object===Object&&self,N=S||E||Function("return this")(),x=t&&!t.nodeType&&t,C=x&&e&&!e.nodeType&&e,Q=C&&C.exports===x,R=Q&&S.process,P=function(){try{return R&&R.binding&&R.binding("util")}catch(e){}}(),q=P&&P.isTypedArray;function D(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function L(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var B,U,W,H=Array.prototype,G=Function.prototype,V=Object.prototype,X=N["__core-js_shared__"],J=G.toString,K=V.hasOwnProperty,Y=(B=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",Z=V.toString,ee=RegExp("^"+J.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=Q?N.Buffer:void 0,ne=N.Symbol,re=N.Uint8Array,oe=V.propertyIsEnumerable,ie=H.splice,ae=ne?ne.toStringTag:void 0,se=Object.getOwnPropertySymbols,ue=te?te.isBuffer:void 0,ce=(U=Object.keys,W=Object,function(e){return U(W(e))}),le=Pe(N,"DataView"),fe=Pe(N,"Map"),he=Pe(N,"Promise"),de=Pe(N,"Set"),pe=Pe(N,"WeakMap"),ge=Pe(Object,"create"),ye=ze(le),me=ze(fe),ve=ze(he),be=ze(de),_e=ze(pe),we=ne?ne.prototype:void 0,Me=we?we.valueOf:void 0;function $e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function je(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ke;++t<n;)this.add(e[t])}function Ae(e){var t=this.__data__=new je(e);this.size=t.size}function Fe(e,t){var n=We(e),r=!n&&Ue(e),o=!n&&!r&&He(e),i=!n&&!r&&!o&&Ke(e),a=n||r||o||i,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var c in e)!t&&!K.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Le(c,u))||s.push(c);return s}function Te(e,t){for(var n=e.length;n--;)if(Be(e[n][0],t))return n;return-1}function Ie(e){return null==e?void 0===e?k:v:ae&&ae in Object(e)?function(e){var t=K.call(e,ae),n=e[ae];try{e[ae]=void 0}catch(e){}var r=Z.call(e);t?e[ae]=n:delete e[ae];return r}(e):function(e){return Z.call(e)}(e)}function Se(e){return Je(e)&&Ie(e)==u}function Ee(e,t,n,r,i){return e===t||(null==e||null==t||!Je(e)&&!Je(t)?e!=e&&t!=t:function(e,t,n,r,i,s){var l=We(e),p=We(t),g=l?c:De(e),v=p?c:De(t),_=(g=g==u?b:g)==b,k=(v=v==u?b:v)==b,F=g==v;if(F&&He(e)){if(!He(t))return!1;l=!0,_=!1}if(F&&!_)return s||(s=new Ae),l||Ke(e)?Ce(e,t,n,r,i,s):function(e,t,n,r,i,s,u){switch(n){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!s(new re(e),new re(t)));case f:case h:case m:return Be(+e,+t);case d:return e.name==t.name&&e.message==t.message;case w:case $:return e==t+"";case y:var c=L;case M:var l=r&o;if(c||(c=z),e.size!=t.size&&!l)return!1;var p=u.get(e);if(p)return p==t;r|=a,u.set(e,t);var g=Ce(c(e),c(t),r,i,s,u);return u.delete(e),g;case j:if(Me)return Me.call(e)==Me.call(t)}return!1}(e,t,g,n,r,i,s);if(!(n&o)){var T=_&&K.call(e,"__wrapped__"),I=k&&K.call(t,"__wrapped__");if(T||I){var S=T?e.value():e,E=I?t.value():t;return s||(s=new Ae),i(S,E,n,r,s)}}if(!F)return!1;return s||(s=new Ae),function(e,t,n,r,i,a){var s=n&o,u=Qe(e),c=u.length,l=Qe(t).length;if(c!=l&&!s)return!1;for(var f=c;f--;){var h=u[f];if(!(s?h in t:K.call(t,h)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var p=!0;a.set(e,t),a.set(t,e);for(var g=s;++f<c;){h=u[f];var y=e[h],m=t[h];if(r)var v=s?r(m,y,h,t,e,a):r(y,m,h,e,t,a);if(!(void 0===v?y===m||i(y,m,n,r,a):v)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,i,s)}(e,t,n,r,Ee,i))}function Ne(e){return!(!Xe(e)||Y&&Y in e)&&(Ge(e)?ee:F).test(ze(e))}function xe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||V,t!==r)return ce(e);var t,n,r,o=[];for(var i in Object(e))K.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Ce(e,t,n,r,i,s){var u=n&o,c=e.length,l=t.length;if(c!=l&&!(u&&l>c))return!1;var f=s.get(e);if(f&&s.get(t))return f==t;var h=-1,d=!0,p=n&a?new Oe:void 0;for(s.set(e,t),s.set(t,e);++h<c;){var g=e[h],y=t[h];if(r)var m=u?r(y,g,h,t,e,s):r(g,y,h,e,t,s);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!D(t,function(e,t){if(o=t,!p.has(o)&&(g===e||i(g,e,n,r,s)))return p.push(t);var o})){d=!1;break}}else if(g!==y&&!i(g,y,n,r,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Qe(e){return function(e,t,n){var r=t(e);return We(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Ye,qe)}function Re(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ne(n)?n:void 0}$e.prototype.clear=function(){this.__data__=ge?ge(null):{},this.size=0},$e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$e.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return n===r?void 0:n}return K.call(t,e)?t[e]:void 0},$e.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:K.call(t,e)},$e.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ge&&void 0===t?r:t,this},je.prototype.clear=function(){this.__data__=[],this.size=0},je.prototype.delete=function(e){var t=this.__data__,n=Te(t,e);return!(n<0||(n==t.length-1?t.pop():ie.call(t,n,1),--this.size,0))},je.prototype.get=function(e){var t=this.__data__,n=Te(t,e);return n<0?void 0:t[n][1]},je.prototype.has=function(e){return Te(this.__data__,e)>-1},je.prototype.set=function(e,t){var n=this.__data__,r=Te(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ke.prototype.clear=function(){this.size=0,this.__data__={hash:new $e,map:new(fe||je),string:new $e}},ke.prototype.delete=function(e){var t=Re(this,e).delete(e);return this.size-=t?1:0,t},ke.prototype.get=function(e){return Re(this,e).get(e)},ke.prototype.has=function(e){return Re(this,e).has(e)},ke.prototype.set=function(e,t){var n=Re(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,r),this},Oe.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.clear=function(){this.__data__=new je,this.size=0},Ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ae.prototype.get=function(e){return this.__data__.get(e)},Ae.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.set=function(e,t){var r=this.__data__;if(r instanceof je){var o=r.__data__;if(!fe||o.length<n-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new ke(o)}return r.set(e,t),this.size=r.size,this};var qe=se?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(se(e),function(t){return oe.call(e,t)}))}:function(){return[]},De=Ie;function Le(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function ze(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Be(e,t){return e===t||e!=e&&t!=t}(le&&De(new le(new ArrayBuffer(1)))!=A||fe&&De(new fe)!=y||he&&"[object Promise]"!=De(he.resolve())||de&&De(new de)!=M||pe&&"[object WeakMap]"!=De(new pe))&&(De=function(e){var t=Ie(e),n=t==b?e.constructor:void 0,r=n?ze(n):"";if(r)switch(r){case ye:return A;case me:return y;case ve:return"[object Promise]";case be:return M;case _e:return"[object WeakMap]"}return t});var Ue=Se(function(){return arguments}())?Se:function(e){return Je(e)&&K.call(e,"callee")&&!oe.call(e,"callee")},We=Array.isArray;var He=ue||function(){return!1};function Ge(e){if(!Xe(e))return!1;var t=Ie(e);return t==p||t==g||t==l||t==_}function Ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Je(e){return null!=e&&"object"==typeof e}var Ke=q?function(e){return function(t){return e(t)}}(q):function(e){return Je(e)&&Ve(e.length)&&!!I[Ie(e)]};function Ye(e){return null!=(t=e)&&Ve(t.length)&&!Ge(t)?Fe(e):xe(e);var t}e.exports=function(e,t){return Ee(e,t)}}),u=a(function(e,t){var n=200,r="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",s="[object Boolean]",u="[object Date]",c="[object Function]",l="[object GeneratorFunction]",f="[object Map]",h="[object Number]",d="[object Object]",p="[object RegExp]",g="[object Set]",y="[object String]",m="[object Symbol]",v="[object ArrayBuffer]",b="[object DataView]",_="[object Float32Array]",w="[object Float64Array]",M="[object Int8Array]",$="[object Int16Array]",j="[object Int32Array]",k="[object Uint8Array]",O="[object Uint8ClampedArray]",A="[object Uint16Array]",F="[object Uint32Array]",T=/\w*$/,I=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,E={};E[a]=E["[object Array]"]=E[v]=E[b]=E[s]=E[u]=E[_]=E[w]=E[M]=E[$]=E[j]=E[f]=E[h]=E[d]=E[p]=E[g]=E[y]=E[m]=E[k]=E[O]=E[A]=E[F]=!0,E["[object Error]"]=E[c]=E["[object WeakMap]"]=!1;var N="object"==typeof i&&i&&i.Object===Object&&i,x="object"==typeof self&&self&&self.Object===Object&&self,C=N||x||Function("return this")(),Q=t&&!t.nodeType&&t,R=Q&&e&&!e.nodeType&&e,P=R&&R.exports===Q;function q(e,t){return e.set(t[0],t[1]),e}function D(e,t){return e.add(t),e}function L(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function z(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function B(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function U(e,t){return function(n){return e(t(n))}}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var H,G=Array.prototype,V=Function.prototype,X=Object.prototype,J=C["__core-js_shared__"],K=(H=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",Y=V.toString,Z=X.hasOwnProperty,ee=X.toString,te=RegExp("^"+Y.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=P?C.Buffer:void 0,re=C.Symbol,oe=C.Uint8Array,ie=U(Object.getPrototypeOf,Object),ae=Object.create,se=X.propertyIsEnumerable,ue=G.splice,ce=Object.getOwnPropertySymbols,le=ne?ne.isBuffer:void 0,fe=U(Object.keys,Object),he=Re(C,"DataView"),de=Re(C,"Map"),pe=Re(C,"Promise"),ge=Re(C,"Set"),ye=Re(C,"WeakMap"),me=Re(Object,"create"),ve=ze(he),be=ze(de),_e=ze(pe),we=ze(ge),Me=ze(ye),$e=re?re.prototype:void 0,je=$e?$e.valueOf:void 0;function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fe(e){this.__data__=new Oe(e)}function Te(e,t){var n=Ue(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&We(e)}(e)&&Z.call(e,"callee")&&(!se.call(e,"callee")||ee.call(e)==a)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var i in e)!t&&!Z.call(e,i)||o&&("length"==i||De(i,r))||n.push(i);return n}function Ie(e,t,n){var r=e[t];Z.call(e,t)&&Be(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function Se(e,t){for(var n=e.length;n--;)if(Be(e[n][0],t))return n;return-1}function Ee(e,t,n,r,o,i,I){var S;if(r&&(S=i?r(e,o,i,I):r(e)),void 0!==S)return S;if(!Ve(e))return e;var N=Ue(e);if(N){if(S=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&Z.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,S)}else{var x=qe(e),C=x==c||x==l;if(He(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(x==d||x==a||C&&!i){if(z(e))return i?e:{};if(S=function(e){return"function"!=typeof e.constructor||Le(e)?{}:(t=ie(e),Ve(t)?ae(t):{});var t}(C?{}:e),!t)return function(e,t){return Ce(e,Pe(e),t)}(e,function(e,t){return e&&Ce(t,Xe(t),e)}(S,e))}else{if(!E[x])return i?e:{};S=function(e,t,n,r){var o=e.constructor;switch(t){case v:return xe(e);case s:case u:return new o(+e);case b:return function(e,t){var n=t?xe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case _:case w:case M:case $:case j:case k:case O:case A:case F:return function(e,t){var n=t?xe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case f:return function(e,t,n){return L(t?n(B(e),!0):B(e),q,new e.constructor)}(e,r,n);case h:case y:return new o(e);case p:return(c=new(a=e).constructor(a.source,T.exec(a))).lastIndex=a.lastIndex,c;case g:return function(e,t,n){return L(t?n(W(e),!0):W(e),D,new e.constructor)}(e,r,n);case m:return i=e,je?Object(je.call(i)):{}}var i;var a,c}(e,x,Ee,t)}}I||(I=new Fe);var Q=I.get(e);if(Q)return Q;if(I.set(e,S),!N)var R=n?function(e){return function(e,t,n){var r=t(e);return Ue(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Xe,Pe)}(e):Xe(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(R||e,function(o,i){R&&(o=e[i=o]),Ie(S,i,Ee(o,t,n,r,i,e,I))}),S}function Ne(e){return!(!Ve(e)||K&&K in e)&&(Ge(e)||z(e)?te:I).test(ze(e))}function xe(e){var t=new e.constructor(e.byteLength);return new oe(t).set(new oe(e)),t}function Ce(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=r?r(n[a],e[a],a,n,e):void 0;Ie(n,a,void 0===s?e[a]:s)}return n}function Qe(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function Re(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ne(n)?n:void 0}ke.prototype.clear=function(){this.__data__=me?me(null):{}},ke.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ke.prototype.get=function(e){var t=this.__data__;if(me){var n=t[e];return n===r?void 0:n}return Z.call(t,e)?t[e]:void 0},ke.prototype.has=function(e){var t=this.__data__;return me?void 0!==t[e]:Z.call(t,e)},ke.prototype.set=function(e,t){return this.__data__[e]=me&&void 0===t?r:t,this},Oe.prototype.clear=function(){this.__data__=[]},Oe.prototype.delete=function(e){var t=this.__data__,n=Se(t,e);return!(n<0||(n==t.length-1?t.pop():ue.call(t,n,1),0))},Oe.prototype.get=function(e){var t=this.__data__,n=Se(t,e);return n<0?void 0:t[n][1]},Oe.prototype.has=function(e){return Se(this.__data__,e)>-1},Oe.prototype.set=function(e,t){var n=this.__data__,r=Se(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ae.prototype.clear=function(){this.__data__={hash:new ke,map:new(de||Oe),string:new ke}},Ae.prototype.delete=function(e){return Qe(this,e).delete(e)},Ae.prototype.get=function(e){return Qe(this,e).get(e)},Ae.prototype.has=function(e){return Qe(this,e).has(e)},Ae.prototype.set=function(e,t){return Qe(this,e).set(e,t),this},Fe.prototype.clear=function(){this.__data__=new Oe},Fe.prototype.delete=function(e){return this.__data__.delete(e)},Fe.prototype.get=function(e){return this.__data__.get(e)},Fe.prototype.has=function(e){return this.__data__.has(e)},Fe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Oe){var o=r.__data__;if(!de||o.length<n-1)return o.push([e,t]),this;r=this.__data__=new Ae(o)}return r.set(e,t),this};var Pe=ce?U(ce,Object):function(){return[]},qe=function(e){return ee.call(e)};function De(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Le(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function ze(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Be(e,t){return e===t||e!=e&&t!=t}(he&&qe(new he(new ArrayBuffer(1)))!=b||de&&qe(new de)!=f||pe&&"[object Promise]"!=qe(pe.resolve())||ge&&qe(new ge)!=g||ye&&"[object WeakMap]"!=qe(new ye))&&(qe=function(e){var t=ee.call(e),n=t==d?e.constructor:void 0,r=n?ze(n):void 0;if(r)switch(r){case ve:return b;case be:return f;case _e:return"[object Promise]";case we:return g;case Me:return"[object WeakMap]"}return t});var Ue=Array.isArray;function We(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Ge(e)}var He=le||function(){return!1};function Ge(e){var t=Ve(e)?ee.call(e):"";return t==c||t==l}function Ve(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Xe(e){return We(e)?Te(e):function(e){if(!Le(e))return fe(e);var t=[];for(var n in Object(e))Z.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}e.exports=function(e){return Ee(e,!1,!0)}}),c=a(function(e,t){var n;n=function(){var e=[],t=[],n={},r={},o={};function i(e){return"string"==typeof e?new RegExp("^"+e+"$","i"):e}function a(e,t){return e===t?t:e===e.toUpperCase()?t.toUpperCase():e[0]===e[0].toUpperCase()?t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():t.toLowerCase()}function s(e,t){return e.replace(t[0],function(n,r){var o,i,s=(o=t[1],i=arguments,o.replace(/\$(\d{1,2})/g,function(e,t){return i[t]||""}));return a(""===n?e[r-1]:n,s)})}function u(e,t,r){if(!e.length||n.hasOwnProperty(e))return t;for(var o=r.length;o--;){var i=r[o];if(i[0].test(t))return s(t,i)}return t}function c(e,t,n){return function(r){var o=r.toLowerCase();return t.hasOwnProperty(o)?a(r,o):e.hasOwnProperty(o)?a(r,e[o]):u(o,r,n)}}function l(e,t,n,r){return function(r){var o=r.toLowerCase();return!!t.hasOwnProperty(o)||!e.hasOwnProperty(o)&&u(o,o,n)===o}}function f(e,t,n){var r=1===t?f.singular(e):f.plural(e);return(n?t+" ":"")+r}return f.plural=c(o,r,e),f.isPlural=l(o,r,e),f.singular=c(r,o,t),f.isSingular=l(r,o,t),f.addPluralRule=function(t,n){e.push([i(t),n])},f.addSingularRule=function(e,n){t.push([i(e),n])},f.addUncountableRule=function(e){"string"!=typeof e?(f.addPluralRule(e,"$0"),f.addSingularRule(e,"$0")):n[e.toLowerCase()]=!0},f.addIrregularRule=function(e,t){t=t.toLowerCase(),e=e.toLowerCase(),o[e]=t,r[t]=e},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(e){return f.addIrregularRule(e[0],e[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(e){return f.addPluralRule(e[0],e[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(analy|ba|diagno|parenthe|progno|synop|the|empha|cri)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(e){return f.addSingularRule(e[0],e[1])}),["adulthood","advice","agenda","aid","alcohol","ammo","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","manga","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","tennis","traffic","transporation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(f.addUncountableRule),f},e.exports=n()}),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=c.plural,h=c.singular;function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}function p(e){return e.charAt(0).toLowerCase()+e.slice(1)}function g(e){return e}function y(e){return e}function m(e){return e}function v(e){return null!==e&&"object"===(void 0===e?"undefined":l(e))}function b(e,t){if(!e)return{};for(var n=-1,r=t.length,o={};++n<r;){var i=t[n];o[i]=e[i]}return o}function _(e,t){return s(e,t)}function w(e){return u(e)}var M=function(){function e(e){this.PREFIX=["%c Vuex-ORM: GraphQL Plugin %c","background: #35495e; padding: 1px 0; border-radius: 3px; color: #eee;","background: transparent;"],this.enabled=e,this.log("Logging is enabled.")}return e.prototype.group=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(console.groupCollapsed?console.groupCollapsed.apply(console,this.PREFIX.concat(e)):console.log.apply(console,this.PREFIX.concat(e)))},e.prototype.groupEnd=function(){this.enabled&&console.groupEnd&&console.groupEnd()},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&console.log.apply(console,this.PREFIX.concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&console.warn.apply(console,this.PREFIX.concat(e))},e.prototype.logQuery=function(e,t,n){if(this.enabled)try{var r=g(e);this.group("Sending query:",r.split("\n")[1].replace("{","").trim()),console.log(r),t&&console.log("VARIABLES:",t),n&&console.log("FETCH POLICY:",n),this.groupEnd()}catch(t){console.error("[Vuex-ORM-Apollo] There is a syntax error in the query!",t,e)}},e}(),$=function(){function e(e){var t=this;this.fields=new Map,this.mocks={},this.baseModel=e,this.singularName=h(this.baseModel.entity),this.pluralName=f(this.baseModel.entity);var n=this.baseModel.fields();Object.keys(n).forEach(function(e){t.fields.set(e,n[e])})}return e.isFieldNumber=function(e){if(!e)return!1;var t=A.getInstance();return e instanceof t.components.Number||e instanceof t.components.Increment},e.isFieldAttribute=function(e){var t=A.getInstance();return e instanceof t.components.Increment||e instanceof t.components.Attr||e instanceof t.components.String||e instanceof t.components.Number||e instanceof t.components.Boolean},e.isConnection=function(e){var t=A.getInstance();return!(e instanceof t.components.BelongsTo||e instanceof t.components.HasOne||e instanceof t.components.MorphTo||e instanceof t.components.MorphOne)},e.augment=function(e){var t=e.baseModel.fields.bind(e.baseModel);e.baseModel.fields=function(){var n=t();return n.$isPersisted=e.baseModel.boolean(!1),n}},e.prototype.getQueryFields=function(){var t=this,n=[];return this.fields.forEach(function(r,o){e.isFieldAttribute(r)&&!t.skipField(o)&&n.push(o)}),n},e.prototype.skipField=function(e){if(e.startsWith("$"))return!0;if(this.baseModel.skipFields&&this.baseModel.skipFields.indexOf(e)>=0)return!0;var t=A.getInstance(),n=!1;return this.getRelations().forEach(function(r){return!(r instanceof t.components.BelongsTo||r instanceof t.components.HasOne)||r.foreignKey!==e||(n=!0,!1)}),n},e.prototype.getRelations=function(){var t=new Map;return this.fields.forEach(function(n,r){e.isFieldAttribute(n)||t.set(r,n)}),t},e.prototype.isTypeFieldOfPolymorphicRelation=function(e){var t=this,n=A.getInstance(),r=!1;return n.models.forEach(function(o){return!r&&(o.getRelations().forEach(function(o){return!(o instanceof n.components.MorphMany||o instanceof n.components.MorphedByMany||o instanceof n.components.MorphOne||o instanceof n.components.MorphTo||o instanceof n.components.MorphToMany)||o.type!==e||!o.related||o.related.entity!==t.baseModel.entity||(r=!0,!1)}),!0)}),r},e.prototype.getRecordWithId=function(e){return this.baseModel.query().withAllRecursive().where("id",e).first()},e.prototype.shouldEagerLoadRelation=function(e,t,n){var r=A.getInstance();return t instanceof r.components.HasOne||t instanceof r.components.BelongsTo||t instanceof r.components.MorphOne||void 0!==(this.baseModel.eagerLoad||[]).find(function(t){return t===n.singularName||t===n.pluralName||t===e})},e.prototype.$addMock=function(e){return!this.$findMock(e.action,e.options)&&(this.mocks[e.action]||(this.mocks[e.action]=[]),this.mocks[e.action].push(e),!0)},e.prototype.$findMock=function(e,t){return this.mocks[e]&&this.mocks[e].find(function(e){return!e.options||!t||_(b(t,Object.keys(e.options)),e.options||{})})||null},e.prototype.$mockHook=function(e,t){var n,r=null,o=this.$findMock(e,t);return o&&(r=o.returnValue instanceof Function?o.returnValue():o.returnValue||null),r?(r instanceof Array?r.forEach(function(e){return e.$isPersisted=!0}):r.$isPersisted=!0,(n={})[this.pluralName]=r,n):null},e}(),j=function(){function e(){}return e.transformOutgoingData=function(e,t,n){var r=this,o=A.getInstance(),i=e.getRelations(),a={};return Object.keys(t).forEach(function(s){var u=t[s];if(n&&n.includes(s)||(!i.has(s)||i.get(s)instanceof o.components.BelongsTo)&&!s.startsWith("$")&&null!==u&&void 0!==u){var c=i.get(s)&&i.get(s).parent?o.getModel(h(i.get(s).parent.entity),!0):null;if(u instanceof Array){var f=o.getModel(h(s),!0);a[s]=f?u.map(function(t){return r.transformOutgoingData(f||e,t)}):u}else"object"===(void 0===u?"undefined":l(u))&&void 0!==u.$id?(c||(c=o.getModel(u.$self().entity)),a[s]=r.transformOutgoingData(c,u)):a[s]=u}}),a},e.transformIncomingData=function(e,t,n,r){var o=this;void 0===n&&(n=!1),void 0===r&&(r=!1);var i={},a=A.getInstance();return r||(a.logger.group("Transforming incoming data"),a.logger.log("Raw data:",e)),Array.isArray(e)?i=e.map(function(e){return o.transformIncomingData(e,t,n,!0)}):Object.keys(e).forEach(function(s){if(s in e)if(v(e[s])){var u=a.getModel(s,!0)||t;if(e[s].nodes&&"nodes"===a.connectionQueryMode)i[f(s)]=o.transformIncomingData(e[s].nodes,u,n,!0);else if(e[s].edges&&"edges"===a.connectionQueryMode)i[f(s)]=o.transformIncomingData(e[s].edges,u,n,!0);else if(e.node&&"edges"===a.connectionQueryMode)i=o.transformIncomingData(e.node,u,n,!0);else{var c=s;n&&!r&&(c=p(c=e[s].nodes?u.pluralName:u.singularName)),i[c]=o.transformIncomingData(e[s],u,n,!0)}}else $.isFieldNumber(t.fields.get(s))?i[s]=parseFloat(e[s]):s.endsWith("Type")&&t.isTypeFieldOfPolymorphicRelation(s)?i[s]=f(p(e[s])):i[s]=e[s]}),r?i.$isPersisted=!0:(a.logger.log("Transformed data:",i),a.logger.groupEnd()),w(i)},e}(),k=function(){function e(){var e=A.getInstance();this.apolloClient=e.options.apolloClient,this.apolloClient.prettify=g}return e.prototype.request=function(t,n,i,a,s){return void 0===a&&(a=!1),void 0===s&&(s=!1),r(this,void 0,void 0,function(){var r,u,c;return o(this,function(o){switch(o.label){case 0:return r=s?"network-only":"cache-first",A.getInstance().logger.logQuery(n,i,r),u={headers:e.getHeaders()},a?[4,this.apolloClient.mutate({mutation:n,variables:i,context:u})]:[3,2];case 1:return c=o.sent(),[3,4];case 2:return[4,this.apolloClient.query({query:n,variables:i,fetchPolicy:r,context:u})];case 3:c=o.sent(),o.label=4;case 4:return[2,j.transformIncomingData(c.data,t,a)]}})})},e.prototype.simpleQuery=function(t,n,i,a){return void 0===i&&(i=!1),r(this,void 0,void 0,function(){var r;return o(this,function(o){return r=i?"network-only":"cache-first",[2,this.apolloClient.query({query:t,variables:n,fetchPolicy:r,context:{headers:e.getHeaders()}})]})})},e.prototype.simpleMutation=function(t,n,i){return r(this,void 0,void 0,function(){return o(this,function(r){return[2,this.apolloClient.mutate({mutation:t,variables:n,context:{headers:e.getHeaders()}})]})})},e.getHeaders=function(){var e=A.getInstance(),t=e.options.headers?e.options.headers:{};return"function"==typeof t&&(t=t(e)),t},e}(),O=function(){function e(e){var t=this;this.schema=e,this.types=new Map,this.mutations=new Map,this.queries=new Map,this.schema.types.forEach(function(e){return t.types.set(e.name,e)}),this.getType("Query").fields.forEach(function(e){return t.queries.set(e.name,e)}),this.getType("Mutation").fields.forEach(function(e){return t.mutations.set(e.name,e)})}return e.prototype.determineQueryMode=function(){var t=this,n=null;if(this.queries.forEach(function(r){var o=e.getTypeNameOfField(r);return!o.endsWith("TypeConnection")||(n=t.getType(o),!1)}),!n)throw new Error("Can't determine the connection mode due to the fact that here are no connection types in the schema. Please set the connectionQueryMode via Vuex-ORM-GraphQL options!");return n.fields.find(function(e){return"nodes"===e.name})?"nodes":n.fields.find(function(e){return"edges"===e.name})?"edges":"plain"},e.prototype.getType=function(e,t){void 0===t&&(t=!1),e=d(e);var n=this.types.get(e);if(!t&&!n)throw new Error("Couldn't find Type of name "+e+" in the GraphQL Schema.");return n||null},e.prototype.getMutation=function(e,t){void 0===t&&(t=!1);var n=this.mutations.get(e);if(!t&&!n)throw new Error("Couldn't find Mutation of name "+e+" in the GraphQL Schema.");return n||null},e.prototype.getQuery=function(e,t){void 0===t&&(t=!1);var n=this.queries.get(e);if(!t&&!n)throw new Error("Couldn't find Query of name "+e+" in the GraphQL Schema.");return n||null},e.returnsConnection=function(t){return e.getTypeNameOfField(t).endsWith("TypeConnection")},e.getRealType=function(e){return"NON_NULL"===e.kind?this.getRealType(e.ofType):e},e.getTypeNameOfField=function(e){var t=this.getRealType(e.type);if("LIST"===t.kind)return"["+t.ofType.name+"]";var n=t.name||t.ofType.name||t.ofType.ofType.name;if(!n)throw new Error("Can't find type name for field "+e.name);return n},e}(),A=function(){function e(e,t){if(this.models=new Map,this.debugMode=!1,this.connectionQueryMode="auto",this.globalMocks={},this.components=e,this.options=t,this.database=t.database,this.debugMode=Boolean(t.debug),this.logger=new M(this.debugMode),!t.database)throw new Error("database param is required to initialize vuex-orm-graphql!")}return e.getInstance=function(){return this.instance},e.setup=function(t,n){return this.instance=new e(t,n),this.instance.apollo=new k,this.instance.collectModels(),this.instance.logger.group("Context setup"),this.instance.logger.log("components",this.instance.components),this.instance.logger.log("options",this.instance.options),this.instance.logger.log("database",this.instance.database),this.instance.logger.log("models",this.instance.models),this.instance.logger.groupEnd(),this.instance},e.prototype.loadSchema=function(){return r(this,void 0,void 0,function(){var e=this;return o(this,function(t){return this.schemaWillBeLoaded||(this.schemaWillBeLoaded=new Promise(function(t,n){return r(e,void 0,void 0,function(){var e,n;return o(this,function(r){switch(r.label){case 0:return this.logger.log("Fetching GraphQL Schema initially ..."),this.options.connectionQueryMode?this.connectionQueryMode=this.options.connectionQueryMode:this.connectionQueryMode="auto",e={headers:{"X-GraphQL-Introspection-Query":"true"}},[4,this.apollo.simpleQuery("\nquery Introspection {\n  __schema {\n    types {\n      name\n      fields(includeDeprecated: true) {\n        name\n        args {\n          name\n          type {\n            name\n            kind\n\n            ofType {\n              kind\n\n              name\n              ofType {\n                kind\n                name\n\n                ofType {\n                  kind\n                  name\n                }\n              }\n            }\n          }\n        }\n\n        type {\n          name\n          kind\n\n          ofType {\n            kind\n\n            name\n            ofType {\n              kind\n              name\n\n              ofType {\n                kind\n                name\n              }\n            }\n          }\n        }\n      }\n\n      inputFields {\n        name\n        type {\n          name\n          kind\n\n          ofType {\n            kind\n\n            name\n            ofType {\n              kind\n              name\n\n              ofType {\n                kind\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",{},!0,e)];case 1:return n=r.sent(),this.schema=new O(n.data.__schema),this.logger.log("GraphQL Schema successful fetched",n),this.logger.log("Starting to process the schema ..."),this.processSchema(),this.logger.log("Schema procession done!"),t(this.schema),[2]}})})})),[2,this.schemaWillBeLoaded]})})},e.prototype.loadSchemaSync=function(e){this.logger.log("loadSchemaSync"),this.options.connectionQueryMode?this.connectionQueryMode=this.options.connectionQueryMode:this.connectionQueryMode="auto",this.schema=new O(e.data.__schema),this.logger.log("GraphQL Schema successful fetched",e),this.logger.log("Starting to process the schema ..."),this.processSchema(),this.logger.log("Schema procession done!"),this.schemaWillBeLoaded=Promise.resolve(this.schema)},e.prototype.processSchema=function(){var e=this;this.models.forEach(function(t){var n;try{n=e.schema.getType(t.singularName)}catch(n){return void e.logger.warn("Ignoring entity "+t.singularName+" because it's not in the schema.")}t.fields.forEach(function(r,o){n.fields.find(function(e){return e.name===o})||(e.logger.warn("Ignoring field "+t.singularName+"."+o+" because it's not in the schema."),t.baseModel.skipFields=t.baseModel.skipFields?t.baseModel.skipFields:[],t.baseModel.skipFields.includes(o)||t.baseModel.skipFields.push(o))})}),"auto"===this.connectionQueryMode?(this.connectionQueryMode=this.schema.determineQueryMode(),this.logger.log("Connection Query Mode is "+this.connectionQueryMode+" by automatic detection")):this.logger.log("Connection Query Mode is "+this.connectionQueryMode+" by config")},e.prototype.getModel=function(e,t){if(void 0===t&&(t=!1),"string"==typeof e){var n=h(p(e));if(e=this.models.get(n),!t&&!e)throw new Error("No such model "+n+"!")}return e},e.prototype.addGlobalMock=function(e){return!this.findGlobalMock(e.action,e.options)&&(this.globalMocks[e.action]||(this.globalMocks[e.action]=[]),this.globalMocks[e.action].push(e),!0)},e.prototype.findGlobalMock=function(e,t){return this.globalMocks[e]&&this.globalMocks[e].find(function(e){return!e.options||!t||_(b(t,Object.keys(e.options)),e.options||{})})||null},e.prototype.globalMockHook=function(e,t){var n=null,r=this.findGlobalMock(e,t);return r&&(n=r.returnValue instanceof Function?r.returnValue():r.returnValue||null),n},e.prototype.collectModels=function(){var e=this;this.database.entities.forEach(function(t){var n=new $(t.model);e.models.set(n.singularName,n),$.augment(n)})},e}(),F=function(){function e(){}return e.buildField=function(e,t,n,r,o,i,a){void 0===t&&(t=!0),void 0===r&&(r=[]),void 0===i&&(i=!1),void 0===a&&(a=!1);var s=A.getInstance();e=s.getModel(e),o=o||e.pluralName;var u=s.schema.getMutation(o,!0)||s.schema.getQuery(o,!0),c=this.buildArguments(e,n,!1,i,a,u);r=0===r.length?[e.singularName]:r;var l="\n      "+e.getQueryFields().join(" ")+"\n      "+this.buildRelationsQuery(e,r)+"\n    ";if(t){var f=""+o+c;return"nodes"===s.connectionQueryMode?"\n          "+f+" {\n            nodes {\n              "+l+"\n            }\n          }\n        ":"edges"===s.connectionQueryMode?"\n          "+f+" {\n            edges {\n              node {\n                "+l+"\n              }\n            }\n          }\n        ":"\n          "+f+" {\n            "+l+"\n          }\n        "}return"\n        "+(o||e.singularName)+c+" {\n          "+l+"\n        }\n      "},e.buildQuery=function(e,t,n,r,o,i){var a=A.getInstance();t=a.getModel(t),r=r?w(r):{},Object.keys(r).forEach(function(e){r&&r[e]&&v(r[e])&&(r[e]={__type:d(e)})}),o=void 0===o?!r.id:o,n||(n=o?t.pluralName:t.singularName);var s=a.schema.getMutation(n,!0)||a.schema.getQuery(n,!0);return e+" "+d(n)+this.buildArguments(t,r,!0,i,!0,s)+" {\n  "+this.buildField(t,o,r,[],n,i,!0)+"\n}"},e.buildArguments=function(t,n,r,o,i,a){var s=this;if(void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=!0),void 0===a&&(a=null),void 0===n)return"";var u="",c=!0;return n&&(Object.keys(n).forEach(function(l){var f=n[l],h=t.skipField(l),d=("id"===l||h)&&!i,p=s.findSchemaFieldForArgument(l,a,t,o),g=p&&O.getTypeNameOfField(p).endsWith("TypeConnection");if(f&&!d&&!g){var y="";if(r)if(v(f)&&f.__type)y=f.__type+"Input!";else if(Array.isArray(f)&&a){var m=e.findSchemaFieldForArgument(l,a,t,o);if(!m)throw new Error("The argument "+l+" is of type array but it's not possible to determine the type, because it's not in the field "+a.name);y=O.getTypeNameOfField(m)+"!"}else p&&O.getTypeNameOfField(p)?y=O.getTypeNameOfField(p)+"!":"id"===l||h?y="ID!":(y=s.determineAttributeType(t,l,f,a||void 0),y+="!");else y="$"+l;u=u+(c?"":", ")+(r?"$":"")+l+": "+y,c=!1}}),c||(!r&&o&&(u="filter: { "+u+" }"),u="("+u+")")),u},e.determineAttributeType=function(e,t,n,r){var o,i=A.getInstance(),a=e.fields.get(t);r?(o=r.args.find(function(e){return e.name===t}))||r.args.find(function(e){return"filter"===e.name})&&(o=this.findSchemaFieldForArgument(t,null,e,!0)):o=i.schema.getType(e.singularName).fields.find(function(e){return e.name===t});if(o&&O.getTypeNameOfField(o))return O.getTypeNameOfField(o);if(a instanceof i.components.String)return"String";if(a&&a instanceof i.components.Number)return"Int";if(a&&a instanceof i.components.Boolean)return"Boolean";if("number"==typeof n)return"Int";if("string"==typeof n)return"String";if("boolean"==typeof n)return"Boolean";throw new Error("Can't find suitable graphql type for field '"+e.singularName+"."+t+"'.")},e.findSchemaFieldForArgument=function(e,t,n,r){var o,i=A.getInstance().schema;if(t&&(o=t.args.find(function(t){return t.name===e})))return o;var a=i.getType(n.singularName+(r?"Filter":""),!0);return(o=a?(r?a.inputFields:a.fields).find(function(t){return t.name===e}):void 0)||A.getInstance().logger.warn("Couldn't find the argument with name "+e+" for the mutation/query "+(t?t.name:"(?)")),o},e.buildRelationsQuery=function(e,t){var n=this;if(void 0===t&&(t=[]),null===e)return"";var r=A.getInstance(),o=[];return e.getRelations().forEach(function(i,a){var s,u=i;u instanceof r.components.BelongsToMany||u instanceof r.components.HasMany||u instanceof r.components.HasManyThrough||u instanceof r.components.MorphedByMany||u instanceof r.components.MorphMany||u instanceof r.components.MorphOne||u instanceof r.components.MorphToMany||u instanceof r.components.HasOne?s=r.getModel(u.related.entity):u instanceof r.components.BelongsTo||u instanceof r.components.HasManyBy?s=r.getModel(u.parent.entity):u instanceof r.components.MorphTo?s=r.getModel(u.type):(s=r.getModel(a),r.logger.log("WARNING: unknown field type. Fallback to attribute name",u));var c=function(e,t){for(var n=-1;++n<e.length&&t(e[n],n,e););return e.slice(0,n)}(t.slice(0).reverse(),function(e){return e===s.singularName}).length,l=c?c>5:t.includes(s.singularName);if(e.shouldEagerLoadRelation(a,i,s)&&!l){var f=t.slice(0);f.push(s.singularName),o.push(n.buildField(s,$.isConnection(i),void 0,f,a,!1))}}),o.join("\n")},e}(),T=function(){function e(){}return e.insertData=function(e,t){return r(this,void 0,void 0,function(){var n,i=this;return o(this,function(a){switch(a.label){case 0:return n={},[4,Promise.all(Object.keys(e).map(function(a){return r(i,void 0,void 0,function(){var r,i;return o(this,function(o){switch(o.label){case 0:return r=e[a],A.getInstance().logger.log("Inserting records",r),[4,t("insertOrUpdate",{data:r})];case 1:return i=o.sent(),Object.keys(i).forEach(function(e){n[e]||(n[e]=[]),n[e]=n[e].concat(i[e])}),[2]}})})}))];case 1:return a.sent(),[2,n]}})})},e}(),I=function(){function e(){}return e.getNameForPersist=function(e){return this.getCRUDName("create",e)},e.getNameForPush=function(e){return this.getCRUDName("update",e)},e.getNameForDestroy=function(e){return this.getCRUDName("delete",e)},e.getNameForFetch=function(e,t){return void 0===t&&(t=!1),t?e.pluralName:e.singularName},e.getCRUDName=function(e,t){return""+e+d(t.singularName)},e}(),S=function(){function e(){}return e.mutation=function(e,t,n,i){return r(this,void 0,void 0,function(){var r,a,s,u,c,l,f,h,d,p;return o(this,function(o){switch(o.label){case 0:return t?(a=A.getInstance(),(u=a.schema)?[3,2]:[4,a.loadSchema()]):[3,6];case 1:u=o.sent(),o.label=2;case 2:return s=u,c=O.returnsConnection(s.getMutation(e)),l=F.buildQuery("mutation",i,e,t,c),[4,A.getInstance().apollo.request(i,l,t,!0)];case 3:return f=o.sent(),e===I.getNameForDestroy(i)?[3,5]:((f=f[Object.keys(f)[0]]).id=parseInt(f.id,10),[4,T.insertData((r={},r[i.pluralName]=f,r),n)]);case 4:return h=o.sent(),d=h[i.pluralName],(p=d[d.length-1])?[2,p]:(A.getInstance().logger.log("Couldn't find the record of type '",i.pluralName,"' within",h,". Falling back to find()"),[2,i.baseModel.query().last()]);case 5:return[2,!0];case 6:return[2]}})})},e.getModelFromState=function(e){return A.getInstance().getModel(e.$name)},e.prepareArgs=function(e,t){return e=e||{},t&&(e.id=t),e},e.addRecordToArgs=function(e,t,n){return e[t.singularName]=j.transformOutgoingData(t,n),e},e.transformArgs=function(e){var t=A.getInstance();return Object.keys(e).forEach(function(n){var r=e[n];if(r instanceof t.components.Model){var o=t.getModel(h(r.$self().entity)),i=j.transformOutgoingData(o,r);t.logger.log("A",n,"model was found within the variables and will be transformed from",r,"to",i),e[n]=i}}),e},e}(),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){var n=e.state,i=e.dispatch,a=t.id,s=t.args;return r(this,void 0,void 0,function(){var e,t,r;return o(this,function(o){switch(o.label){case 0:return a?(e=this.getModelFromState(n),t=I.getNameForDestroy(e),(r=e.$mockHook("destroy",{id:a}))?[4,T.insertData(r,i)]:[3,2]):[3,4];case 1:return o.sent(),[2,!0];case 2:return s=this.prepareArgs(s,a),[4,S.mutation(t,s,i,e)];case 3:return o.sent(),[2,!0];case 4:throw new Error("The destroy action requires the 'id' to be set")}})})},t}(S),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){var n=e.state,i=e.dispatch;return r(this,void 0,void 0,function(){var e,r,a,s,u,c,l,f,h;return o(this,function(o){switch(o.label){case 0:return e=A.getInstance(),r=this.getModelFromState(n),(a=r.$mockHook("fetch",{filter:t&&t.filter||{}}))?[2,T.insertData(a,i)]:e.schema?[3,2]:[4,e.loadSchema()];case 1:o.sent(),o.label=2;case 2:return s=t&&t.filter?j.transformOutgoingData(r,t.filter,Object.keys(t.filter)):{},u=t&&t.bypassCache,c=!s.id,l=I.getNameForFetch(r,c),t&&t.beforeBuildQuery&&t.beforeBuildQuery(),f=F.buildQuery("query",r,l,s,c,c),t&&t.afterBuildQuery&&t.afterBuildQuery(),[4,e.apollo.request(r,f,s,!1,u)];case 3:return h=o.sent(),[2,T.insertData(h,i)]}})})},t}(S),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){var n=e.state,i=e.dispatch,a=t.args,s=t.name;return r(this,void 0,void 0,function(){var e,t,r;return o(this,function(o){switch(o.label){case 0:return s?(e=A.getInstance(),t=this.getModelFromState(n),(r=t.$mockHook("mutate",{name:s,args:a||{}}))?[2,T.insertData(r,i)]:e.schema?[3,2]:[4,e.loadSchema()]):[3,3];case 1:o.sent(),o.label=2;case 2:return a=this.prepareArgs(a),this.transformArgs(a),[2,S.mutation(s,a,i,t)];case 3:throw new Error("The mutate action requires the mutation name ('mutation') to be set")}})})},t}(S),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){var n=e.state,i=e.dispatch,a=t.id,s=t.args;return r(this,void 0,void 0,function(){var e,t,r,u,c,l;return o(this,function(o){switch(o.label){case 0:return a?(e=this.getModelFromState(n),t=I.getNameForPersist(e),r=e.getRecordWithId(a),(u=e.$mockHook("persist",{id:a,args:s||{}}))?(c=T.insertData(u,i),[4,this.deleteObsoleteRecord(e,c,r)]):[3,2]):[3,5];case 1:return o.sent(),[2,c];case 2:return s=this.prepareArgs(s),this.addRecordToArgs(s,e,r),[4,S.mutation(t,s,i,e)];case 3:return l=o.sent(),[4,this.deleteObsoleteRecord(e,l,r)];case 4:return o.sent(),[2,l];case 5:throw new Error("The persist action requires the 'id' to be set")}})})},t.deleteObsoleteRecord=function(e,t,n){return r(this,void 0,void 0,function(){return o(this,function(e){return t&&n&&t.id!==n.id?(A.getInstance().logger.log("Dropping deprecated record",n),[2,n.$delete()]):[2]})})},t}(S),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){var n=e.state,i=e.dispatch,a=t.data,s=t.args;return r(this,void 0,void 0,function(){var e,t,r;return o(this,function(o){if(a)return e=this.getModelFromState(n),t=I.getNameForPush(e),(r=e.$mockHook("push",{data:a,args:s||{}}))?[2,T.insertData(r,i)]:(s=this.prepareArgs(s,a.id),this.addRecordToArgs(s,e,a),[2,S.mutation(t,s,i,e)]);throw new Error("The persist action requires the 'data' to be set")})})},t}(S),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){var n=e.state,i=e.dispatch,a=t.name,s=t.filter,u=t.bypassCache;return r(this,void 0,void 0,function(){var e,t,r,c,l,f,h,d;return o(this,function(o){switch(o.label){case 0:return a?(e=A.getInstance(),t=this.getModelFromState(n),(r=t.$mockHook("query",{name:a,filter:s||{}}))?[2,T.insertData(r,i)]:(l=e.schema)?[3,2]:[4,e.loadSchema()]):[3,4];case 1:l=o.sent(),o.label=2;case 2:return c=l,s=s?j.transformOutgoingData(t,s):{},f=O.returnsConnection(c.getQuery(a)),h=F.buildQuery("query",t,a,s,f,!1),[4,e.apollo.request(t,h,s,!1,u)];case 3:return d=o.sent(),[2,T.insertData(d,i)];case 4:throw new Error("The customQuery action requires the query name ('name') to be set")}})})},t}(S),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){e.dispatch;var n=t.query,i=t.bypassCache,a=t.variables;return r(this,void 0,void 0,function(){var e,t,r;return o(this,function(o){switch(o.label){case 0:return e=A.getInstance(),n?(t=y(n),a=this.prepareArgs(a),[4,e.apollo.simpleQuery(m(t),a,i)]):[3,2];case 1:return r=o.sent(),[2,(s=w(r.data),JSON.parse(JSON.stringify(s)))];case 2:throw new Error("The simpleQuery action requires the 'query' to be set")}var s})})},t}(S),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.call=function(e,t){e.dispatch;var n=t.query,i=t.variables;return r(this,void 0,void 0,function(){var e,t;return o(this,function(r){switch(r.label){case 0:return e=A.getInstance(),n?(t=y(n),i=this.prepareArgs(i),[4,e.apollo.simpleMutation(m(t),i)]):[3,2];case 1:return[2,w(r.sent().data)];case 2:throw new Error("The simpleMutation action requires the 'query' to be set")}})})},t}(S),D=function(){function e(t,n){A.setup(t,n),e.setupActions(),e.setupModelMethods()}return e.prototype.getContext=function(){return A.getInstance()},e.setupActions=function(){var e=A.getInstance();e.components.RootActions.simpleQuery=P.call.bind(P),e.components.RootActions.simpleMutation=q.call.bind(q),e.components.Actions.fetch=N.call.bind(N),e.components.Actions.persist=C.call.bind(C),e.components.Actions.push=Q.call.bind(Q),e.components.Actions.destroy=E.call.bind(E),e.components.Actions.mutate=x.call.bind(x),e.components.Actions.query=R.call.bind(R)},e.setupModelMethods=function(){var e=A.getInstance();e.components.Model.fetch=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,function(){var n;return o(this,function(r){return v(n=e)||(n={id:e}),[2,this.dispatch("fetch",{filter:n,bypassCache:t})]})})},e.components.Model.mutate=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.dispatch("mutate",e)]})})},e.components.Model.customQuery=function(e){var t=e.name,n=e.filter,i=e.multiple,a=e.bypassCache;return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.dispatch("query",{name:t,filter:n,multiple:i,bypassCache:a})]})})};var t=e.components.Model.prototype;t.$mutate=function(e){var t=e.name,n=e.args,i=e.multiple;return r(this,void 0,void 0,function(){return o(this,function(e){return(n=n||{}).id||(n.id=this.id),[2,this.$dispatch("mutate",{name:t,args:n,multiple:i})]})})},t.$customQuery=function(e){var t=e.name,n=e.filter,i=e.multiple,a=e.bypassCache;return r(this,void 0,void 0,function(){return o(this,function(e){return(n=n||{}).id||(n.id=this.id),[2,this.$dispatch("query",{name:t,filter:n,multiple:i,bypassCache:a})]})})},t.$persist=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.$dispatch("persist",{id:this.id,args:e})]})})},t.$push=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){return[2,this.$dispatch("push",{data:this,args:e})]})})},t.$destroy=function(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,this.$dispatch("destroy",{id:this.id})]})})},t.$deleteAndDestroy=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this.$delete()];case 1:return e.sent(),[2,this.$destroy()]}})})}},e}(),L=function(){function e(){}return e.install=function(t,n){return e.instance=new D(t,n),e.instance},e}(),z=null;var B=function(){function e(e,t){this.action=e,this.options=t}return e.prototype.for=function(e){return this.modelClass=e,this},e.prototype.andReturn=function(e){return this.returnValue=e,this.installMock(),this},e.prototype.installMock=function(){"simpleQuery"===this.action||"simpleMutation"===this.action?z.addGlobalMock(this):z.getModel(this.modelClass.entity).$addMock(this)},e}();e.default=L,e.setupTestUtils=function(e){if(!e.instance)throw new Error("Please call this function after setting up the store!");z=e.instance.getContext()},e.mock=function(e,t){if(!z)throw new Error("Please call setupTestUtils() before!");return new B(e,t)},e.clearORMStore=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:if(!z)throw new Error("Please call setupTestUtils() before!");return[4,z.database.store.dispatch("entities/deleteAll")];case 1:return e.sent(),[2]}})})},e.Mock=B,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=vuex-orm-graphql.umd.js.map
